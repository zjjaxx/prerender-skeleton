function e(e,t,n,a,o,r,i){try{var c=e[r](i);var s=c.value}catch(e){n(e);return}if(c.done){t(s)}else{Promise.resolve(s).then(a,o)}}function t(t){return function(){var n=this,a=arguments;return new Promise(function(o,r){var i=t.apply(n,a);function c(t){e(i,o,r,c,s,"next",t)}function s(t){e(i,o,r,c,s,"throw",t)}c(undefined)})}}function n(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||false;a.configurable=true;if("value"in a)a.writable=true;Object.defineProperty(e,a.key,a)}}function o(e,t,n){if(t)a(e.prototype,t);if(n)a(e,n);return e}function r(e,t){if(t!=null&&typeof Symbol!=="undefined"&&t[Symbol.hasInstance]){return!!t[Symbol.hasInstance](e)}else{return e instanceof t}}function i(e,t){var n,a,o,r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},i=Object.create((typeof Iterator==="function"?Iterator:Object).prototype);return i.next=c(0),i["throw"]=c(1),i["return"]=c(2),typeof Symbol==="function"&&(i[Symbol.iterator]=function(){return this}),i;function c(e){return function(t){return s([e,t])}}function s(c){if(n)throw new TypeError("Generator is already executing.");while(i&&(i=0,c[0]&&(r=0)),r)try{if(n=1,a&&(o=c[0]&2?a["return"]:c[0]?a["throw"]||((o=a["return"])&&o.call(a),0):a.next)&&!(o=o.call(a,c[1])).done)return o;if(a=0,o)c=[c[0]&2,o.value];switch(c[0]){case 0:case 1:o=c;break;case 4:r.label++;return{value:c[1],done:false};case 5:r.label++;a=c[1];c=[0];continue;case 7:c=r.ops.pop();r.trys.pop();continue;default:if(!(o=r.trys,o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1];o=c;break}if(o&&r.label<o[2]){r.label=o[2];r.ops.push(c);break}if(o[2])r.ops.pop();r.trys.pop();continue}c=t.call(e,r)}catch(e){c=[6,e];a=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:true}}}var c=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"__clone";var n=e.cloneNode(!0);function a(e,t){e.id&&(e.id="".concat(t,"-").concat(e.id)),Array.from(e.children).forEach(function(e,n){a(e,"".concat(t,"-").concat(n))})}return a(n,t),n},s=function(e){var t=e.parentNode;t&&t.removeChild(e)};var l=function(e){try{var t=e.getBoundingClientRect();return t.top<window.innerHeight&&t.left<window.innerWidth}catch(e){return!0}},d=function(e,t){try{return e.hasAttribute(t)}catch(e){return!1}},u=function(e){e.style&&(e.style.opacity=0)},p=function(e){var t=typeof e=="string"?parseInt(e,10):e,n=window.getComputedStyle(document.documentElement).fontSize;return"".concat(t/parseInt(n,10),"rem")},A=function(e){e.innerHTML="";var t=e.className&&e.className.split(" ")||[];t=t.map(function(e){return"."+e});var n=t.join(""),a=e.id?"#"+e.id:"",o=n||a;if(!o)return;var r;var i=true,c=false,s=undefined;try{for(var l=document.styleSheets[Symbol.iterator](),d;!(i=(d=l.next()).done);i=true){var u=d.value;if(!u.href){r=u;break}}}catch(e){c=true;s=e}finally{try{if(!i&&l.return!=null){l.return()}}finally{if(c){throw s}}}try{r&&r.insertRule("".concat(o,"::before{content:'' !important;background:none !important;}"),0),r&&r.insertRule("".concat(o,"::after{content:'' !important;background:none !important;}"),0)}catch(e){console.log("handleEmptyNode Error: ",JSON.stringify(e))}},f=function(e){if(!e)return!1;var t=window.getComputedStyle(e,"::before"),n=t.getPropertyValue("content"),a=parseFloat(t.getPropertyValue("width"))||0,o=n&&n!=="none",r=window.getComputedStyle(e,"::after"),i=r.getPropertyValue("content"),c=parseFloat(r.getPropertyValue("width"))||0,s=i&&i!=="none",l=Math.max(a,c);return o||s?{hasBefore:o,hasAfter:s,ele:e,width:l}:!1},g=function(e){return e.nodeType===Node.TEXT_NODE&&e.nodeValue!==""},h=function(e){return e.nodeType===Node.ELEMENT_NODE};var m="skeleton_clone",y="skeleton-text-wrapper-id",b="#EEEEEE",k="rgb(238, 238, 238)",v="sk-pseudo",w="sk-pseudo-animation",E="sk-button",C="sk-transparent",N="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",S="data:image/image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAopJREFUeF7tm1FyAyEIhs3JWk/W5mSmJ2tDRjtmBwUU3HXXPGUmG8P/gYJobu7ir9vF9TsWgBDCp3PuK8KC90d/3cFA7/03ZSgJIIQQnHMziMa03ikIVQBP7UAweZ6CedTPH/5JoWRcEcBJxCfdwOCBQZAAgAEgpNCBjuL+bL3Kp20xCmoAfjeiihSPIj7ZESHA2pVe/QC89+SCeSQQIYQ3B5bsZ0fAAiCIAKRuYOdlrSjaLQKIuoHMy1MDYKbOal6eFgBTPJmXzwTgVTdEQVBNsvLyzACKdYMkL2sAwKLRPA0ii99/4YQAgJ2aSV1Rmop7AKhNAZNsUFuHRgCAOZ6Xn7VoVgdALcLmAEAts3cwXHxsjqBTTr0UJjyhXgNQns/y7hgAMRJSKwrSX9o+q2+lK+Ih/b41coZMAY0Uxh2jJh7aYLvtBbgCep6jxMcoPOd2mCP+tAC44k8JQCJ+OIBSI/J5NvFD9eU5a4FU/FAAWJ2PiGouflrEDwPALUIyICIQreKHAGgQnwcGCaJHvDkAjnFMQCgIzvjU2mFWCEmNk4KQjl8CYQKgxzgmiJIecspsv6gOIPb3sJNikXENIETjJxAWADDvNBmX7Ripo/fm88gRAJrF5yRjRHxsu8a9J9HWAFTEUyt5z+eWAA4v3qQOiN6YQrwVgGnEmwCwOsjomee176qvAQuA0VHWigAjAmsKrEtS65ZY97nA9pJ088bEaJoXh9W6ILEFMPNV2WIRVzsdlpz3j3ay9PfkAGI5OfN/BRKkaglP3tNp6OBIvWP5PHkfgQSQdW/gLdXBsRTDHVt0H4EFgPvLMz63AMzoNU2bVwRo0pxxrBUBM3pN0+YVAZo0Zxzr8hHwB9VpX1/uYOP2AAAAAElFTkSuQmCC",I="data:image/image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAT1JREFUWEftlm0OwyAIhu3JNk+29WRsJ9tKowapH4AxXbI26T+Fx5dXcHEnfwvPDwBP59zNOXefwLZ67zF++jKAkPwxITENmUFwgE9YeSAdhSKHe/lNhhivCOC9P5RmFAD3A8B+QBpfDMC8YVLIDFDxhhpiBCB5I5QCjZrVUlKiEQAI13IlAFktewCwyRivttoDoyWgyUdNuEu/GfnNG0pNAZIc9+3NTa1AT15Jcrz7Zg9YAOjJY+MxAwAASoc/Oh+lbH6l5OZGxA3Ua9W15CYAZiCMwSdk1oxaydUADRlxnPKJGcsSy5SGDa2V2APhqvWCFUHopONG0QDgXlGr1RhUAyBK3rsNZgV+8j2gPW1pvbgEf61AmvvSaSctDR3prWlYutvSHNJ19Wd5aJezIIrviCnPb6kUuO4CuBT4AqsEKzBFERGIAAAAAElFTkSuQmCC",x="data:image/image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAMdJREFUOE+lU4ENwjAM8z7hE8gl8AnwCVyS8QmngKOkCt0yFai0Ve0Sx7GzCb5U9QCAz9ASkQsDJ75UlYc9gMdQNnB+x4qIzBmAN4YabOLcg3pBi18AJDZsx6qsANwAPCsAJpIi92vPwtlpfKtaYCtzXz0l30sGocFGsoRbixZYlRr6bo4wKFU2TSoRdwCOIVwEub0fglYAzdusOquvtGN25xZoCy9OI4O0OQe/AoT334yyzYjNQfofRggwps1IAxjN7OP+BngBsiWUEe5m32cAAAAASUVORK5CYII=",H="#dddddd",B="skeleton-text-block-mark",O="sk-img-small",R="sk-img-mid",T="sk-img-large",P="\n\n      .".concat(m,"{\n        position:fixed;\n        left:0;\n        right:0;\n        top:0;\n        bottom:0;\n        z-index:1000000;\n        width:100vw;\n        height:100vh;\n      }\n\n      .").concat(B,",\n      .").concat(B," * {\n        background-origin: content-box;\n        background-clip: content-box;\n        background-color: transparent;\n        color: transparent !important;\n        background-repeat: repeat-y;\n      }\n  \n      .").concat(v,"::before,\n      .").concat(v,"::after {\n        background: ").concat(b," !important;\n        background-image: none !important;\n        color: transparent !important;\n        border-color: transparent !important;\n      }\n      .").concat(w,"::before,\n      .").concat(w,"::after {\n          animation: skeleton-opacity-animation 1.5s ease infinite !important;\n      }\n  \n      .").concat(E," {\n        box-shadow: none !important;\n      }\n\n      .").concat(O,"{\n         background-image: url(").concat(x,") !important;\n         background-repeat:no-repeat !important;\n         background-position: center !important;\n      }\n      .").concat(R,"{\n         background-image: url(").concat(I,") !important;\n         background-repeat:no-repeat !important;\n         background-position: center !important;\n      }\n      .").concat(T,"{\n         background-image: url(").concat(S,") !important;\n         background-repeat:no-repeat !important;\n         background-position: center !important;\n      }\n  \n      .").concat(C,"::before,\n      .").concat(C,"::after {\n        opacity: 0 !important;\n      }\n      \n      @keyframes skeleton-opacity-animation {\n        0% {\n          opacity: 1;\n        }\n        30% {\n          opacity: 0.65;\n        }\n        100% {\n         opacity: 1;\n        }\n      }\n  \n    ");var F=/*#__PURE__*/function(){"use strict";function e(t){n(this,e);this.options=Object.assign({animation:!0,appId:"app",minGrayBlockWidth:30,minGrayPseudoWidth:30},t)}o(e,[{key:"removeMock",value:function e(){var e=document.querySelector("#".concat(y));e&&e.remove()}},{key:"genSkeleton",value:function e(){var e=this;return t(function(){return i(this,function(t){switch(t.label){case 0:return[4,e.startGenSkeleton()];case 1:t.sent(),e.removeMock();return[2]}})})()}},{key:"startGenSkeleton",value:function e(){var e=this;return t(function(){var t,n;return i(this,function(a){t=document.getElementById(e.options.appId);if(!t)return[2,(console.error("根元素没找到~"),!1)];n=c(t);n.id="__skeleton_clone",n.classList.add(m),t.style.visibility="hidden",document.body.prepend(n),e.styleHandler();try{e.handleNode(n)}catch(e){r(e,Error)&&console.log("==genSkeleton Error==\n",e.message,e.stack)}return[2]})})()}},{key:"styleHandler",value:function e(){var e=document.createElement("style");e.innerText=P.replace(/\n/g,""),document.body.prepend(e)}},{key:"handleNode",value:function e(e){var t=this;if(e){if(g(e)){if(!e.parentNode.classList.contains(B)){var n=e.textContent.replace(/[\r\n]/g,"").trim();if(n){var a=document.createElement("i");return a.classList.add(B),a.innerHTML=n,e.parentNode.replaceChild(a,e),this.textHandler(a),!0}}}else if(h(e)){if(!l(e)||d(e,"data-skeleton-remove"))return s(e);if(d(e,"data-skeleton-ignore")||e.tagName==="STYLE")return;switch(this.beforeHandler(e),this.pseudoHandler(e),e.tagName&&e.tagName.toUpperCase()){case"SCRIPT":this.scriptHandler(e);break;case"IMG":this.imgHandler(e);break;case"SVG":this.svgHandler(e);break;case"INPUT":this.inputHandler(e);break;case"BUTTON":this.buttonHandler(e);break;case"A":this.aHandler(e);break}if(e.childNodes&&e.childNodes.length===1&&e.childNodes[0].nodeType===Node.TEXT_NODE){this.textHandler(e);return}e.hasChildNodes()&&e.childNodes.forEach(function(e){return t.handleNode(e)})}}}},{key:"textHandler",value:function e(e){var t=window.getComputedStyle(e),n=t.display,a=t.lineHeight,o=t.paddingTop,r=t.paddingRight,i=t.paddingBottom,c=t.paddingLeft,s=t.position,l=t.fontSize,d=t.textAlign,u=t.wordSpacing,A=t.wordBreak;/\d/.test(a)||(a="".concat((parseInt(l,10)||14)*1.4,"px"));var f=["fixed","absolute","flex"].find(function(e){return e===s})?s:"relative",g=e.offsetHeight,h=e.offsetWidth,m=(g-parseFloat(o)-parseFloat(i))/parseFloat(a)||0;m=m<1.5?1:m;var y=.6;if(e.classList.add(B),Object.assign(e.style,{backgroundImage:"linear-gradient(\n            transparent ".concat((1-y)/2*100,"%,\n            ").concat(b," 0%,\n            ").concat(b," ").concat(((1-y)/2+y)*100,"%,\n            transparent 0%\n          )"),backgroundSize:"100% ".concat(p(parseInt(a)*1.1)),position:f}),this.addAnimationForElement(e),n!=="inline")if(m>1)this.addTextMask(e,Object.assign(JSON.parse(JSON.stringify(t)),{lineHeight:a}));else{var k=this.getTextWidth(e,{fontSize:l,lineHeight:a,wordBreak:A,wordSpacing:u})/(h-parseInt(r,10)-parseInt(c,10));switch(e.style.backgroundSize="".concat(k*100,"% ").concat(p(parseInt(a)*1.1)),d){case"left":break;case"right":e.style.backgroundPositionX="100%";break;case"center":e.style.backgroundPositionX="50%"}}}},{key:"addTextMask",value:function e(e,t){var n=t.textAlign,a=t.lineHeight,o=t.paddingBottom,r=t.paddingLeft,i=t.paddingRight,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:.5;var s,l;switch(n){case"center":s=document.createElement("span"),l=document.createElement("span"),[s,l].forEach(function(e){Object.assign(e.style,{display:"inline-block",width:"".concat(c/2*100,"%"),height:a,background:"#fff",position:"absolute",bottom:o})}),s.style.left=r,l.style.right=i,e.appendChild(s),e.appendChild(l);break;case"right":s=document.createElement("span"),Object.assign(s.style,{display:"inline-block",width:"".concat(c*100,"%"),height:a,background:"#fff",position:"absolute",bottom:o,left:r}),e.appendChild(s);break;case"left":default:l=document.createElement("span"),Object.assign(l.style,{display:"inline-block",width:"".concat(c*100,"%"),height:a,background:"#fff",position:"absolute",bottom:o,right:i}),e.appendChild(l);break}}},{key:"getTextWidth",value:function e(e,t){var n="skeleton-text-id",a=document.querySelector("#".concat(n));if(!a){var o=document.createElement("p");o.id=y,a=document.createElement("span"),Object.assign(o.style,{width:"10000px",position:"absolute",top:"0"}),a.id=n,a.style.visibility="hidden",o.appendChild(a),document.body.appendChild(o)}return Object.assign(a.style,t),a.innerHTML=e.innerHTML,a.getBoundingClientRect().width}},{key:"scriptHandler",value:function e(e){s(e)}},{key:"imgHandler",value:function e(e){if(e.src){if(/^data:image/.test(e.src))return!1;if(e.src.indexOf("https://zeekrlife-oss.oss-cn-hangzhou.aliyuncs.com/frontend")!==-1||e.src.indexOf("https://zeekrlife-oss.zeekrlife.com/frontend")!==-1)return!1}var t=e.getBoundingClientRect(),n=t.width,a=t.height;e.style.width=n+"px",e.style.height=a+"px",e.src=N,e.style.backgroundColor=H,n>=300||a>=300?e.classList.add(T):n>=150||a>=150?e.classList.add(R):(n>=75||a>=75)&&e.classList.add(O),this.addAnimationForElement(e)}},{key:"aHandler",value:function e(e){e.removeAttribute("href")}},{key:"svgHandler",value:function e(e){var t=e.getBoundingClientRect(),n=t.width,a=t.height;if(n===0||a===0||e.getAttribute("aria-hidden")==="true")return s(e);e.innerHTML="",Object.assign(e.style,{width:p(parseInt(n+"")),height:p(parseInt(a+""))}),this.addAnimationForElement(e)}},{key:"inputHandler",value:function e(e){e.removeAttribute("placeholder"),e.value=""}},{key:"buttonHandler",value:function e(e){if(!e.tagName)return;e.classList.add(E);var t=window.getComputedStyle(e),n=t.width,a=t.height;e.style.width=n,e.style.height=a,e.innerHTML="",this.addAnimationForElement(e)}},{key:"pseudoHandler",value:function e(e){if(!e.tagName)return;var t=f(e);if(!t||!t.ele)return;var n=t.ele,a=t.width;return a<this.options.minGrayPseudoWidth,n.classList.add(C);n.classList.add(v),this.options.animation&&n.classList.add(w)}},{key:"beforeHandler",value:function e(e){if(!e.tagName)return;d(e,"data-skeleton-empty")&&A(e);var t=e.getBoundingClientRect(),n=t.width,a=n<this.options.minGrayBlockWidth;a&&u(e);var o=window.getComputedStyle(e);if(o.backgroundImage!=="none"&&(e.style.backgroundImage="none",e.style.background=b,!a&&this.addAnimationForElement(e)),o.boxShadow!=="none"){var r=o.boxShadow.replace(/^rgb.*\)/,k);e.style.boxShadow=r}o.borderColor&&(e.style.borderColor=b);var i=e.getAttribute("data-skeleton-bgcolor");i&&(e.style.backgroundColor=i,e.style.color="transparent",!a&&this.addAnimationForElement(e))}},{key:"addAnimationForElement",value:function e(e){e&&(e.style.animation=this.options.animation?"skeleton-opacity-animation 1.5s ease infinite":"")}}]);return e}();window.SkeletonRender=F;export{F as default};//# sourceMappingURL=skeleton.mjs.map