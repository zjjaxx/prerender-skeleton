"use strict";function e(e,t,n,a,r,o,i){try{var c=e[o](i);var s=c.value}catch(e){n(e);return}if(c.done){t(s)}else{Promise.resolve(s).then(a,r)}}function t(t){return function(){var n=this,a=arguments;return new Promise(function(r,o){var i=t.apply(n,a);function c(t){e(i,r,o,c,s,"next",t)}function s(t){e(i,r,o,c,s,"throw",t)}c(undefined)})}}function n(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||false;a.configurable=true;if("value"in a)a.writable=true;Object.defineProperty(e,a.key,a)}}function r(e,t,n){if(t)a(e.prototype,t);if(n)a(e,n);return e}function o(e,t){if(t!=null&&typeof Symbol!=="undefined"&&t[Symbol.hasInstance]){return!!t[Symbol.hasInstance](e)}else{return e instanceof t}}function i(e){"@swc/helpers - typeof";return e&&typeof Symbol!=="undefined"&&e.constructor===Symbol?"symbol":typeof e}function c(e,t){var n,a,r,o={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},i=Object.create((typeof Iterator==="function"?Iterator:Object).prototype);return i.next=c(0),i["throw"]=c(1),i["return"]=c(2),typeof Symbol==="function"&&(i[Symbol.iterator]=function(){return this}),i;function c(e){return function(t){return s([e,t])}}function s(c){if(n)throw new TypeError("Generator is already executing.");while(i&&(i=0,c[0]&&(o=0)),o)try{if(n=1,a&&(r=c[0]&2?a["return"]:c[0]?a["throw"]||((r=a["return"])&&r.call(a),0):a.next)&&!(r=r.call(a,c[1])).done)return r;if(a=0,r)c=[c[0]&2,r.value];switch(c[0]){case 0:case 1:r=c;break;case 4:o.label++;return{value:c[1],done:false};case 5:o.label++;a=c[1];c=[0];continue;case 7:c=o.ops.pop();o.trys.pop();continue;default:if(!(r=o.trys,r=r.length>0&&r[r.length-1])&&(c[0]===6||c[0]===2)){o=0;continue}if(c[0]===3&&(!r||c[1]>r[0]&&c[1]<r[3])){o.label=c[1];break}if(c[0]===6&&o.label<r[1]){o.label=r[1];r=c;break}if(r&&o.label<r[2]){o.label=r[2];o.ops.push(c);break}if(r[2])o.ops.pop();o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e];a=0}finally{n=r=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:true}}}var s=Object.defineProperty;var l=Object.getOwnPropertyDescriptor;var d=Object.getOwnPropertyNames;var u=Object.prototype.hasOwnProperty;var p=function(e,t){for(var n in t)s(e,n,{get:t[n],enumerable:!0})},f=function(e,t,n,a){var r=true,o=false,c=undefined;if(t&&(typeof t==="undefined"?"undefined":i(t))=="object"||typeof t=="function")try{var p=function(){var r=A.value;!u.call(e,r)&&r!==n&&s(e,r,{get:function(){return t[r]},enumerable:!(a=l(t,r))||a.enumerable})};for(var f=d(t)[Symbol.iterator](),A;!(r=(A=f.next()).done);r=true)p()}catch(e){o=true;c=e}finally{try{if(!r&&f.return!=null){f.return()}}finally{if(o){throw c}}}return e};var A=function(e){return f(s({},"__esModule",{value:!0}),e)};var g={};p(g,{default:function(){return V}});module.exports=A(g);var h=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"__clone";var n=e.cloneNode(!0);function a(e,t){e.id&&(e.id="".concat(t,"-").concat(e.id)),Array.from(e.children).forEach(function(e,n){a(e,"".concat(t,"-").concat(n))})}return a(n,t),n},m=function(e){var t=e.parentNode;t&&t.removeChild(e)};var y=function(e){try{var t=e.getBoundingClientRect();return t.top<window.innerHeight&&t.left<window.innerWidth}catch(e){return!0}},b=function(e,t){try{return e.hasAttribute(t)}catch(e){return!1}},v=function(e){e.style&&(e.style.opacity=0)},k=function(e){var t=typeof e=="string"?parseInt(e,10):e,n=window.getComputedStyle(document.documentElement).fontSize;return"".concat(t/parseInt(n,10),"rem")},w=function(e){e.innerHTML="";var t=e.className&&e.className.split(" ")||[];t=t.map(function(e){return"."+e});var n=t.join(""),a=e.id?"#"+e.id:"",r=n||a;if(!r)return;var o;var i=true,c=false,s=undefined;try{for(var l=document.styleSheets[Symbol.iterator](),d;!(i=(d=l.next()).done);i=true){var u=d.value;if(!u.href){o=u;break}}}catch(e){c=true;s=e}finally{try{if(!i&&l.return!=null){l.return()}}finally{if(c){throw s}}}try{o&&o.insertRule("".concat(r,"::before{content:'' !important;background:none !important;}"),0),o&&o.insertRule("".concat(r,"::after{content:'' !important;background:none !important;}"),0)}catch(e){console.log("handleEmptyNode Error: ",JSON.stringify(e))}},E=function(e){if(!e)return!1;var t=window.getComputedStyle(e,"::before"),n=t.getPropertyValue("content"),a=parseFloat(t.getPropertyValue("width"))||0,r=n&&n!=="none",o=window.getComputedStyle(e,"::after"),i=o.getPropertyValue("content"),c=parseFloat(o.getPropertyValue("width"))||0,s=i&&i!=="none",l=Math.max(a,c);return r||s?{hasBefore:r,hasAfter:s,ele:e,width:l}:!1},C=function(e){return e.nodeType===Node.TEXT_NODE&&e.nodeValue!==""},N=function(e){return e.nodeType===Node.ELEMENT_NODE};var S="skeleton_clone",I="skeleton-text-wrapper-id",x="#EEEEEE",O="rgb(238, 238, 238)",H="sk-pseudo",B="sk-pseudo-animation",P="sk-button",R="sk-transparent",T="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",F="data:image/image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAopJREFUeF7tm1FyAyEIhs3JWk/W5mSmJ2tDRjtmBwUU3HXXPGUmG8P/gYJobu7ir9vF9TsWgBDCp3PuK8KC90d/3cFA7/03ZSgJIIQQnHMziMa03ikIVQBP7UAweZ6CedTPH/5JoWRcEcBJxCfdwOCBQZAAgAEgpNCBjuL+bL3Kp20xCmoAfjeiihSPIj7ZESHA2pVe/QC89+SCeSQQIYQ3B5bsZ0fAAiCIAKRuYOdlrSjaLQKIuoHMy1MDYKbOal6eFgBTPJmXzwTgVTdEQVBNsvLyzACKdYMkL2sAwKLRPA0ii99/4YQAgJ2aSV1Rmop7AKhNAZNsUFuHRgCAOZ6Xn7VoVgdALcLmAEAts3cwXHxsjqBTTr0UJjyhXgNQns/y7hgAMRJSKwrSX9o+q2+lK+Ih/b41coZMAY0Uxh2jJh7aYLvtBbgCep6jxMcoPOd2mCP+tAC44k8JQCJ+OIBSI/J5NvFD9eU5a4FU/FAAWJ2PiGouflrEDwPALUIyICIQreKHAGgQnwcGCaJHvDkAjnFMQCgIzvjU2mFWCEmNk4KQjl8CYQKgxzgmiJIecspsv6gOIPb3sJNikXENIETjJxAWADDvNBmX7Ripo/fm88gRAJrF5yRjRHxsu8a9J9HWAFTEUyt5z+eWAA4v3qQOiN6YQrwVgGnEmwCwOsjomee176qvAQuA0VHWigAjAmsKrEtS65ZY97nA9pJ088bEaJoXh9W6ILEFMPNV2WIRVzsdlpz3j3ay9PfkAGI5OfN/BRKkaglP3tNp6OBIvWP5PHkfgQSQdW/gLdXBsRTDHVt0H4EFgPvLMz63AMzoNU2bVwRo0pxxrBUBM3pN0+YVAZo0Zxzr8hHwB9VpX1/uYOP2AAAAAElFTkSuQmCC",j="data:image/image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAT1JREFUWEftlm0OwyAIhu3JNk+29WRsJ9tKowapH4AxXbI26T+Fx5dXcHEnfwvPDwBP59zNOXefwLZ67zF++jKAkPwxITENmUFwgE9YeSAdhSKHe/lNhhivCOC9P5RmFAD3A8B+QBpfDMC8YVLIDFDxhhpiBCB5I5QCjZrVUlKiEQAI13IlAFktewCwyRivttoDoyWgyUdNuEu/GfnNG0pNAZIc9+3NTa1AT15Jcrz7Zg9YAOjJY+MxAwAASoc/Oh+lbH6l5OZGxA3Ua9W15CYAZiCMwSdk1oxaydUADRlxnPKJGcsSy5SGDa2V2APhqvWCFUHopONG0QDgXlGr1RhUAyBK3rsNZgV+8j2gPW1pvbgEf61AmvvSaSctDR3prWlYutvSHNJ19Wd5aJezIIrviCnPb6kUuO4CuBT4AqsEKzBFERGIAAAAAElFTkSuQmCC",U="data:image/image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAMdJREFUOE+lU4ENwjAM8z7hE8gl8AnwCVyS8QmngKOkCt0yFai0Ve0Sx7GzCb5U9QCAz9ASkQsDJ75UlYc9gMdQNnB+x4qIzBmAN4YabOLcg3pBi18AJDZsx6qsANwAPCsAJpIi92vPwtlpfKtaYCtzXz0l30sGocFGsoRbixZYlRr6bo4wKFU2TSoRdwCOIVwEub0fglYAzdusOquvtGN25xZoCy9OI4O0OQe/AoT334yyzYjNQfofRggwps1IAxjN7OP+BngBsiWUEe5m32cAAAAASUVORK5CYII=",Q="#dddddd",J="skeleton-text-block-mark",L="sk-img-small",z="sk-img-mid",M="sk-img-large",G="\n\n      .".concat(S,"{\n        position:fixed;\n        left:0;\n        right:0;\n        top:0;\n        bottom:0;\n        z-index:1000000;\n        width:100vw;\n        height:100vh;\n      }\n\n      .").concat(J,",\n      .").concat(J," * {\n        background-origin: content-box;\n        background-clip: content-box;\n        background-color: transparent;\n        color: transparent !important;\n        background-repeat: repeat-y;\n      }\n  \n      .").concat(H,"::before,\n      .").concat(H,"::after {\n        background: ").concat(x," !important;\n        background-image: none !important;\n        color: transparent !important;\n        border-color: transparent !important;\n      }\n      .").concat(B,"::before,\n      .").concat(B,"::after {\n          animation: skeleton-opacity-animation 1.5s ease infinite !important;\n      }\n  \n      .").concat(P," {\n        box-shadow: none !important;\n      }\n\n      .").concat(L,"{\n         background-image: url(").concat(U,") !important;\n         background-repeat:no-repeat !important;\n         background-position: center !important;\n      }\n      .").concat(z,"{\n         background-image: url(").concat(j,") !important;\n         background-repeat:no-repeat !important;\n         background-position: center !important;\n      }\n      .").concat(M,"{\n         background-image: url(").concat(F,") !important;\n         background-repeat:no-repeat !important;\n         background-position: center !important;\n      }\n  \n      .").concat(R,"::before,\n      .").concat(R,"::after {\n        opacity: 0 !important;\n      }\n      \n      @keyframes skeleton-opacity-animation {\n        0% {\n          opacity: 1;\n        }\n        30% {\n          opacity: 0.65;\n        }\n        100% {\n         opacity: 1;\n        }\n      }\n  \n    ");var V=/*#__PURE__*/function(){function e(t){n(this,e);this.options=Object.assign({animation:!0,appId:"app",minGrayBlockWidth:30,minGrayPseudoWidth:30},t)}r(e,[{key:"removeMock",value:function e(){var e=document.querySelector("#".concat(I));e&&e.remove()}},{key:"genSkeleton",value:function e(){var e=this;return t(function(){return c(this,function(t){switch(t.label){case 0:return[4,e.startGenSkeleton()];case 1:t.sent(),e.removeMock();return[2]}})})()}},{key:"startGenSkeleton",value:function e(){var e=this;return t(function(){var t,n;return c(this,function(a){t=document.getElementById(e.options.appId);if(!t)return[2,(console.error("根元素没找到~"),!1)];n=h(t);n.id="__skeleton_clone",n.classList.add(S),t.style.visibility="hidden",document.body.prepend(n),e.styleHandler();try{e.handleNode(n)}catch(e){o(e,Error)&&console.log("==genSkeleton Error==\n",e.message,e.stack)}return[2]})})()}},{key:"styleHandler",value:function e(){var e=document.createElement("style");e.innerText=G.replace(/\n/g,""),document.body.prepend(e)}},{key:"handleNode",value:function e(e){var t=this;if(e){if(C(e)){if(!e.parentNode.classList.contains(J)){var n=e.textContent.replace(/[\r\n]/g,"").trim();if(n){var a=document.createElement("i");return a.classList.add(J),a.innerHTML=n,e.parentNode.replaceChild(a,e),this.textHandler(a),!0}}}else if(N(e)){if(!y(e)||b(e,"data-skeleton-remove"))return m(e);if(b(e,"data-skeleton-ignore")||e.tagName==="STYLE")return;switch(this.beforeHandler(e),this.pseudoHandler(e),e.tagName&&e.tagName.toUpperCase()){case"SCRIPT":this.scriptHandler(e);break;case"IMG":this.imgHandler(e);break;case"SVG":this.svgHandler(e);break;case"INPUT":this.inputHandler(e);break;case"BUTTON":this.buttonHandler(e);break;case"A":this.aHandler(e);break}if(e.childNodes&&e.childNodes.length===1&&e.childNodes[0].nodeType===Node.TEXT_NODE){this.textHandler(e);return}e.hasChildNodes()&&e.childNodes.forEach(function(e){return t.handleNode(e)})}}}},{key:"textHandler",value:function e(e){var t=window.getComputedStyle(e),n=t.display,a=t.lineHeight,r=t.paddingTop,o=t.paddingRight,i=t.paddingBottom,c=t.paddingLeft,s=t.position,l=t.fontSize,d=t.textAlign,u=t.wordSpacing,p=t.wordBreak;/\d/.test(a)||(a="".concat((parseInt(l,10)||14)*1.4,"px"));var f=["fixed","absolute","flex"].find(function(e){return e===s})?s:"relative",A=e.offsetHeight,g=e.offsetWidth,h=(A-parseFloat(r)-parseFloat(i))/parseFloat(a)||0;h=h<1.5?1:h;var m=.6;if(e.classList.add(J),Object.assign(e.style,{backgroundImage:"linear-gradient(\n            transparent ".concat((1-m)/2*100,"%,\n            ").concat(x," 0%,\n            ").concat(x," ").concat(((1-m)/2+m)*100,"%,\n            transparent 0%\n          )"),backgroundSize:"100% ".concat(k(parseInt(a)*1.1)),position:f}),this.addAnimationForElement(e),n!=="inline")if(h>1)this.addTextMask(e,Object.assign(JSON.parse(JSON.stringify(t)),{lineHeight:a}));else{var y=this.getTextWidth(e,{fontSize:l,lineHeight:a,wordBreak:p,wordSpacing:u})/(g-parseInt(o,10)-parseInt(c,10));switch(e.style.backgroundSize="".concat(y*100,"% ").concat(k(parseInt(a)*1.1)),d){case"left":break;case"right":e.style.backgroundPositionX="100%";break;case"center":e.style.backgroundPositionX="50%"}}}},{key:"addTextMask",value:function e(e,t){var n=t.textAlign,a=t.lineHeight,r=t.paddingBottom,o=t.paddingLeft,i=t.paddingRight,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:.5;var s,l;switch(n){case"center":s=document.createElement("span"),l=document.createElement("span"),[s,l].forEach(function(e){Object.assign(e.style,{display:"inline-block",width:"".concat(c/2*100,"%"),height:a,background:"#fff",position:"absolute",bottom:r})}),s.style.left=o,l.style.right=i,e.appendChild(s),e.appendChild(l);break;case"right":s=document.createElement("span"),Object.assign(s.style,{display:"inline-block",width:"".concat(c*100,"%"),height:a,background:"#fff",position:"absolute",bottom:r,left:o}),e.appendChild(s);break;case"left":default:l=document.createElement("span"),Object.assign(l.style,{display:"inline-block",width:"".concat(c*100,"%"),height:a,background:"#fff",position:"absolute",bottom:r,right:i}),e.appendChild(l);break}}},{key:"getTextWidth",value:function e(e,t){var n="skeleton-text-id",a=document.querySelector("#".concat(n));if(!a){var r=document.createElement("p");r.id=I,a=document.createElement("span"),Object.assign(r.style,{width:"10000px",position:"absolute",top:"0"}),a.id=n,a.style.visibility="hidden",r.appendChild(a),document.body.appendChild(r)}return Object.assign(a.style,t),a.innerHTML=e.innerHTML,a.getBoundingClientRect().width}},{key:"scriptHandler",value:function e(e){m(e)}},{key:"imgHandler",value:function e(e){if(e.src){if(/^data:image/.test(e.src))return!1;if(e.src.indexOf("https://zeekrlife-oss.oss-cn-hangzhou.aliyuncs.com/frontend")!==-1||e.src.indexOf("https://zeekrlife-oss.zeekrlife.com/frontend")!==-1)return!1}var t=e.getBoundingClientRect(),n=t.width,a=t.height;e.style.width=n+"px",e.style.height=a+"px",e.src=T,e.style.backgroundColor=Q,n>=300||a>=300?e.classList.add(M):n>=150||a>=150?e.classList.add(z):(n>=75||a>=75)&&e.classList.add(L),this.addAnimationForElement(e)}},{key:"aHandler",value:function e(e){e.removeAttribute("href")}},{key:"svgHandler",value:function e(e){var t=e.getBoundingClientRect(),n=t.width,a=t.height;if(n===0||a===0||e.getAttribute("aria-hidden")==="true")return m(e);e.innerHTML="",Object.assign(e.style,{width:k(parseInt(n+"")),height:k(parseInt(a+""))}),this.addAnimationForElement(e)}},{key:"inputHandler",value:function e(e){e.removeAttribute("placeholder"),e.value=""}},{key:"buttonHandler",value:function e(e){if(!e.tagName)return;e.classList.add(P);var t=window.getComputedStyle(e),n=t.width,a=t.height;e.style.width=n,e.style.height=a,e.innerHTML="",this.addAnimationForElement(e)}},{key:"pseudoHandler",value:function e(e){if(!e.tagName)return;var t=E(e);if(!t||!t.ele)return;var n=t.ele,a=t.width;return a<this.options.minGrayPseudoWidth,n.classList.add(R);n.classList.add(H),this.options.animation&&n.classList.add(B)}},{key:"beforeHandler",value:function e(e){if(!e.tagName)return;b(e,"data-skeleton-empty")&&w(e);var t=e.getBoundingClientRect(),n=t.width,a=n<this.options.minGrayBlockWidth;a&&v(e);var r=window.getComputedStyle(e);if(r.backgroundImage!=="none"&&(e.style.backgroundImage="none",e.style.background=x,!a&&this.addAnimationForElement(e)),r.boxShadow!=="none"){var o=r.boxShadow.replace(/^rgb.*\)/,O);e.style.boxShadow=o}r.borderColor&&(e.style.borderColor=x);var i=e.getAttribute("data-skeleton-bgcolor");i&&(e.style.backgroundColor=i,e.style.color="transparent",!a&&this.addAnimationForElement(e))}},{key:"addAnimationForElement",value:function e(e){e&&(e.style.animation=this.options.animation?"skeleton-opacity-animation 1.5s ease infinite":"")}}]);return e}();window.SkeletonRender=V;//# sourceMappingURL=skeleton.js.map